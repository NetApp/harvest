
name:               Ems
query:              api/support/ems/events
object:             ems

counters:
  - ^^index                                                        => index
  - ^node.name                                                     => node
  - ^message.name                                                  => message_name
  - ^message.severity                                              => message_severity
  - ^log_message                                                   => log_message
  - ^source                                                        => source
  - time(timestamp)                                                => update_time

plugins:
  - EMS:
      interval:
        - time: 1h  # should be multiple of 1 hour
  - LabelAgent:
      value_to_num_regex:
        - issue message_severity .*emergency.*$ .*error.*$ `0` # .*alert.*$
      include_equals:
#        - source `ypbind`
        - message_severity `emergency`
#        - message_severity `alert`
#        - message_severity `error`
#        - message_severity `notice`
#        - message_severity `informational`
        - message_severity `debug`

export_options:
  instance_keys:
    - index
    - node
    - source
  instance_labels:
    - message_name
    - message_severity
    - log_message
