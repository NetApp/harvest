
name:                       Lun
query:                      api/private/cli/lun
object:                     lun

counters:
  - ^^uuid
  - ^node                   => node
  - ^path                   => path
  - ^qtree                  => qtree
  - ^serial_hex             => serial_hex
  - ^state                  => state
  - ^volume                 => volume
  - ^vserver                => svm
  - size                    => size
  - size_used               => size_used


plugins:
  - MetricAgent:
      compute_metric:
        - size_used_percent PERCENT size_used size
  - LabelAgent:
      value_to_num:
        - new_status state online online `0`
    # There are three flavors of path names
    # /vol/volName/lunName
    # /vol/volName/lun401/lunName
    # /lunName
      split_regex:
        - path `^/[^/]+/([^/]+)(?:/.*?|)/([^/]+)$` volume,lun
        - path `^([^/]+)$` lun

export_options:
  instance_keys:
    - lun
    - node
    - qtree
    - svm
    - volume
  instance_labels:
    - serial_hex
    - state
