
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/harvest.svg">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.9">
    
    
      
        <title>Plugins - Harvest</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.08040f6c.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#built-in-plugins" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Harvest" class="md-header__button md-logo" aria-label="Harvest" data-md-component="logo">
      
  <img src="../assets/harvest.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Harvest
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Plugins
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_3" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_3">
          
            <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/NetApp/harvest" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    NetApp/harvest
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Harvest" class="md-nav__button md-logo" aria-label="Harvest" data-md-component="logo">
      
  <img src="../assets/harvest.svg" alt="logo">

    </a>
    Harvest
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/NetApp/harvest" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    NetApp/harvest
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        What is Harvest?
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../quickstart/" class="md-nav__link">
        Quickstart
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Installation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Installation" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Installation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../install/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../install/package-managers/" class="md-nav__link">
        Package Managers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../install/containers/" class="md-nav__link">
        Containers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../install/native/" class="md-nav__link">
        Native
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../system-requirements/" class="md-nav__link">
        System Requirements
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../upgrade/" class="md-nav__link">
        Upgrade
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Prepare Monitored Clusters
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Prepare Monitored Clusters" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Prepare Monitored Clusters
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../prepare-cdot-clusters/" class="md-nav__link">
        ONTAP cDOT
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../prepare-fsx-clusters/" class="md-nav__link">
        Amazon FSx for ONTAP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../prepare-7mode-clusters/" class="md-nav__link">
        ONTAP 7mode
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../prepare-storagegrid-clusters/" class="md-nav__link">
        StorageGRID
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../configure-harvest-basic/" class="md-nav__link">
        Configure Harvest (basic)
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Configure Exporters
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Configure Exporters" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Configure Exporters
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../prometheus-exporter/" class="md-nav__link">
        Prometheus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../influxdb-exporter/" class="md-nav__link">
        InfluxDB
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../configure-grafana/" class="md-nav__link">
        Configure Grafana
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          Configure Collectors
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Configure Collectors" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Configure Collectors
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../configure-zapi/" class="md-nav__link">
        ZAPI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../configure-rest/" class="md-nav__link">
        REST
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../configure-ems/" class="md-nav__link">
        EMS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../configure-storagegrid/" class="md-nav__link">
        StorageGRID
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../configure-unix/" class="md-nav__link">
        Unix
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../configure-templates/" class="md-nav__link">
        Templates
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../dashboards/" class="md-nav__link">
        Dashboards
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../manage-harvest/" class="md-nav__link">
        Manage Harvest Pollers
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../configure-harvest-advanced/" class="md-nav__link">
        Configure Harvest (advanced)
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        Troubleshoot
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_16" type="checkbox" id="__nav_16" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_16">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_16">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Plugins
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Plugins
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#built-in-plugins" class="md-nav__link">
    Built-in Plugins
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aggregator" class="md-nav__link">
    Aggregator
  </a>
  
    <nav class="md-nav" aria-label="Aggregator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rule-syntax" class="md-nav__link">
    Rule syntax
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregation-rules" class="md-nav__link">
    Aggregation rules
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#max" class="md-nav__link">
    Max
  </a>
  
    <nav class="md-nav" aria-label="Max">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#max-rule-syntax" class="md-nav__link">
    Max Rule syntax
  </a>
  
    <nav class="md-nav" aria-label="Max Rule syntax">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#max-examples" class="md-nav__link">
    Max Examples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#labelagent" class="md-nav__link">
    LabelAgent
  </a>
  
    <nav class="md-nav" aria-label="LabelAgent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#split" class="md-nav__link">
    split
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#split_regex" class="md-nav__link">
    split_regex
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#split_pairs" class="md-nav__link">
    split_pairs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#join" class="md-nav__link">
    join
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#replace" class="md-nav__link">
    replace
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#replace_regex" class="md-nav__link">
    replace_regex
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclude_equals" class="md-nav__link">
    exclude_equals
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclude_contains" class="md-nav__link">
    exclude_contains
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclude_regex" class="md-nav__link">
    exclude_regex
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#include_equals" class="md-nav__link">
    include_equals
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#include_contains" class="md-nav__link">
    include_contains
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#include_regex" class="md-nav__link">
    include_regex
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#value_mapping" class="md-nav__link">
    value_mapping
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#value_to_num" class="md-nav__link">
    value_to_num
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#value_to_num_regex" class="md-nav__link">
    value_to_num_regex
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metricagent" class="md-nav__link">
    MetricAgent
  </a>
  
    <nav class="md-nav" aria-label="MetricAgent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#compute_metric" class="md-nav__link">
    compute_metric
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../resources/matrix/" class="md-nav__link">
        Matrix
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ontap-metrics/" class="md-nav__link">
        ONTAP Metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../resources/templates-and-metrics/" class="md-nav__link">
        Templates And Metrics
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_17" type="checkbox" id="__nav_17" >
      
      
      
      
        <label class="md-nav__link" for="__nav_17">
          About
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="About" data-md-level="1">
        <label class="md-nav__title" for="__nav_17">
          <span class="md-nav__icon md-icon"></span>
          About
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../license/" class="md-nav__link">
        License
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/" class="md-nav__link">
        Release Notes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#built-in-plugins" class="md-nav__link">
    Built-in Plugins
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aggregator" class="md-nav__link">
    Aggregator
  </a>
  
    <nav class="md-nav" aria-label="Aggregator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rule-syntax" class="md-nav__link">
    Rule syntax
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregation-rules" class="md-nav__link">
    Aggregation rules
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#max" class="md-nav__link">
    Max
  </a>
  
    <nav class="md-nav" aria-label="Max">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#max-rule-syntax" class="md-nav__link">
    Max Rule syntax
  </a>
  
    <nav class="md-nav" aria-label="Max Rule syntax">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#max-examples" class="md-nav__link">
    Max Examples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#labelagent" class="md-nav__link">
    LabelAgent
  </a>
  
    <nav class="md-nav" aria-label="LabelAgent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#split" class="md-nav__link">
    split
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#split_regex" class="md-nav__link">
    split_regex
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#split_pairs" class="md-nav__link">
    split_pairs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#join" class="md-nav__link">
    join
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#replace" class="md-nav__link">
    replace
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#replace_regex" class="md-nav__link">
    replace_regex
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclude_equals" class="md-nav__link">
    exclude_equals
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclude_contains" class="md-nav__link">
    exclude_contains
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclude_regex" class="md-nav__link">
    exclude_regex
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#include_equals" class="md-nav__link">
    include_equals
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#include_contains" class="md-nav__link">
    include_contains
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#include_regex" class="md-nav__link">
    include_regex
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#value_mapping" class="md-nav__link">
    value_mapping
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#value_to_num" class="md-nav__link">
    value_to_num
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#value_to_num_regex" class="md-nav__link">
    value_to_num_regex
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metricagent" class="md-nav__link">
    MetricAgent
  </a>
  
    <nav class="md-nav" aria-label="MetricAgent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#compute_metric" class="md-nav__link">
    compute_metric
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h2 id="built-in-plugins">Built-in Plugins<a class="headerlink" href="#built-in-plugins" title="Permanent link">&para;</a></h2>
<p>The <code>plugin</code> feature allows users to manipulate and customize data collected by collectors without changing the
collectors. Plugins have the same capabilities as collectors and therefore can collect data on their own as well.
Furthermore, multiple plugins can be put in a pipeline to perform more complex operations.</p>
<p>Harvest architecture defines three types of plugins:</p>
<p><strong>built-in generic</strong> - Statically compiled, generic plugins. "Generic" means the plugin is collector-agnostic. These
plugins are provided in this package.</p>
<p><strong>dynamic-generic</strong> - These are generic plugins as well, but they are compiled as shared objects and dynamically loaded.
These plugins are living in the directory src/plugins.</p>
<p><strong>dynamic-custom</strong> - These plugins are collector-specific. Their source code should reside inside the plugins/
subdirectory of the collector package. Custom plugins have access to all the parameters of their parent collector and
should be therefore treated with great care.</p>
<p>This documentation gives an overview of builtin plugins. For other plugins, see their respective documentation. For
writing your own plugin, see Developer's documentation.</p>
<p><strong>Note:</strong> the rules are executed in the same order as you've added them.</p>
<h1 id="aggregator">Aggregator<a class="headerlink" href="#aggregator" title="Permanent link">&para;</a></h1>
<p>Aggregator creates a new collection of metrics (Matrix) by summarizing and/or averaging metric values from an existing
Matrix for a given label. For example, if the collected metrics are for volumes, you can create an aggregation for nodes
or svms.</p>
<h3 id="rule-syntax">Rule syntax<a class="headerlink" href="#rule-syntax" title="Permanent link">&para;</a></h3>
<p>simplest case:</p>
<div class="highlight"><pre><span></span><code><span class="nt">plugins</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">Aggregator</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LABEL</span><span class="w"></span>
<span class="c1"># will aggregate a new Matrix based on target label LABEL</span><span class="w"></span>
</code></pre></div>
<p>If you want to specify which labels should be included in the new instances, you can add those space-seperated
after <code>LABEL</code>:</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LABEL LABEL1,LABEL2</span><span class="w"></span>
<span class="w">    </span><span class="c1"># same, but LABEL1 and LABEL2 will be copied into the new instances</span><span class="w"></span>
<span class="w">    </span><span class="c1"># (default is to only copy LABEL and any global labels (such as cluster and datacenter)</span><span class="w"></span>
</code></pre></div>
<p>Or include all labels:</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LABEL ...</span><span class="w"></span>
<span class="w">    </span><span class="c1"># copy all labels of the original instance</span><span class="w"></span>
</code></pre></div>
<p>By default, aggregated metrics will be prefixed with <code>LABEL</code>. For example if the object of the original Matrix
is <code>volume</code> (meaning metrics are prefixed with <code>volume_</code>) and <code>LABEL</code> is <code>aggr</code>, then the metric <code>volume_read_ops</code> will
become <code>aggr_volume_read_ops</code>, etc. You can override this by providing the <code>&lt;&gt;OBJ</code> using the following syntax:</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LABEL&lt;&gt;OBJ</span><span class="w"></span>
<span class="w">    </span><span class="c1"># use OBJ as the object of the new matrix, e.g. if the original object is &quot;volume&quot; and you</span><span class="w"></span>
<span class="w">    </span><span class="c1"># want to leave metric names unchanged, use &quot;volume&quot;</span><span class="w"></span>
</code></pre></div>
<p>Finally, sometimes you only want to aggregate instances with a specific label value. You can use <code>&lt;VALUE&gt;</code> for that (
optionally follow by <code>OBJ</code>):</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LABEL&lt;VALUE&gt;</span><span class="w"></span>
<span class="w">    </span><span class="c1"># aggregate all instances if LABEL has value VALUE</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LABEL&lt;`VALUE`&gt;</span><span class="w"></span>
<span class="w">    </span><span class="c1"># same, but VALUE is regular expression</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LABEL&lt;LABELX=`VALUE`&gt;</span><span class="w"></span>
<span class="w">    </span><span class="c1"># same, but check against &quot;LABELX&quot; (instead of &quot;LABEL&quot;)</span><span class="w"></span>
</code></pre></div>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code><span class="nt">plugins</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">Aggregator</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="c1"># will aggregate metrics of the aggregate. The labels &quot;node&quot; and &quot;type&quot; are included in the new instances</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aggr node type</span><span class="w"></span>
<span class="w">    </span><span class="c1"># aggregate instances if label &quot;type&quot; has value &quot;flexgroup&quot;</span><span class="w"></span>
<span class="w">    </span><span class="c1"># include all original labels</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">type&lt;flexgroup&gt; ...</span><span class="w"></span>
<span class="w">    </span><span class="c1"># aggregate all instances if value of &quot;volume&quot; ends with underscore and 4 digits</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">volume&lt;`_\d{4}$`&gt;</span><span class="w"></span>
</code></pre></div>
<h3 id="aggregation-rules">Aggregation rules<a class="headerlink" href="#aggregation-rules" title="Permanent link">&para;</a></h3>
<p>The plugin tries to intelligently aggregate metrics based on a few rules:</p>
<ul>
<li><strong>Sum</strong> - the default rule, if no other rules apply</li>
<li><strong>Average</strong> - if any of the following is true:<ul>
<li>metric name has suffix <code>_percent</code> or <code>_percentage</code></li>
<li>metric name has prefix <code>average_</code> or <code>avg_</code></li>
<li>metric has property (<code>metric.GetProperty()</code>) <code>percent</code> or <code>average</code></li>
</ul>
</li>
<li><strong>Weighted Average</strong> - applied if metric has property <code>average</code> and suffix <code>_latency</code> and if there is a
  matching <code>_ops</code> metric. (This is currently only matching to ZapiPerf metrics, which use the Property field of
  metrics.)</li>
<li><strong>Ignore</strong> - metrics created by some plugins, such as value_to_num by LabelAgent</li>
</ul>
<h1 id="max">Max<a class="headerlink" href="#max" title="Permanent link">&para;</a></h1>
<p>Max creates a new collection of metrics (Matrix) by calculating max of metric values from an existing Matrix for a given
label. For example, if the collected metrics are for disks, you can create max at the node or aggregate level.
Refer <a href="#max-examples">Max Examples</a> for more details.</p>
<h3 id="max-rule-syntax">Max Rule syntax<a class="headerlink" href="#max-rule-syntax" title="Permanent link">&para;</a></h3>
<p>simplest case:</p>
<div class="highlight"><pre><span></span><code><span class="nt">plugins</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">Max</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LABEL</span><span class="w"></span>
<span class="c1"># create a new Matrix of max values on target label LABEL</span><span class="w"></span>
</code></pre></div>
<p>If you want to specify which labels should be included in the new instances, you can add those space-seperated
after <code>LABEL</code>:</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LABEL LABEL1,LABEL2</span><span class="w"></span>
<span class="w">    </span><span class="c1"># similar to the above example, but LABEL1 and LABEL2 will be copied into the new instances</span><span class="w"></span>
<span class="w">    </span><span class="c1"># (default is to only copy LABEL and all global labels (such as cluster and datacenter)</span><span class="w"></span>
</code></pre></div>
<p>Or include all labels:</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LABEL ...</span><span class="w"></span>
<span class="w">    </span><span class="c1"># copy all labels of the original instance</span><span class="w"></span>
</code></pre></div>
<p>By default, metrics will be prefixed with <code>LABEL</code>. For example if the object of the original Matrix is <code>volume</code> (meaning
metrics are prefixed with <code>volume_</code>) and <code>LABEL</code> is <code>aggr</code>, then the metric <code>volume_read_ops</code> will
become <code>aggr_volume_read_ops</code>. You can override this using the <code>&lt;&gt;OBJ</code> pattern shown below:</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LABEL&lt;&gt;OBJ</span><span class="w"></span>
<span class="w">    </span><span class="c1"># use OBJ as the object of the new matrix, e.g. if the original object is &quot;volume&quot; and you</span><span class="w"></span>
<span class="w">    </span><span class="c1"># want to leave metric names unchanged, use &quot;volume&quot;</span><span class="w"></span>
</code></pre></div>
<p>Finally, sometimes you only want to generate instances with a specific label value. You can use <code>&lt;VALUE&gt;</code> for that (
optionally followed by <code>OBJ</code>):</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LABEL&lt;VALUE&gt;</span><span class="w"></span>
<span class="w">    </span><span class="c1"># aggregate all instances if LABEL has value VALUE</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LABEL&lt;`VALUE`&gt;</span><span class="w"></span>
<span class="w">    </span><span class="c1"># same, but VALUE is regular expression</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LABEL&lt;LABELX=`VALUE`&gt;</span><span class="w"></span>
<span class="w">    </span><span class="c1"># same, but check against &quot;LABELX&quot; (instead of &quot;LABEL&quot;)</span><span class="w"></span>
</code></pre></div>
<h4 id="max-examples">Max Examples<a class="headerlink" href="#max-examples" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nt">plugins</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">Max</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="c1"># will create max of each aggregate metric. All metrics will be prefixed with aggr_disk_max. All labels are included in the new instances</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aggr&lt;&gt;aggr_disk_max ...</span><span class="w"></span>
<span class="w">    </span><span class="c1"># calculate max instances if label &quot;disk&quot; has value &quot;1.1.0&quot;. Prefix with disk_max</span><span class="w"></span>
<span class="w">    </span><span class="c1"># include all original labels</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">disk&lt;1.1.0&gt;disk_max ...</span><span class="w"></span>
<span class="w">    </span><span class="c1"># max of all instances if value of &quot;volume&quot; ends with underscore and 4 digits</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">volume&lt;`_\d{4}$`&gt;</span><span class="w"></span>
</code></pre></div>
<h1 id="labelagent">LabelAgent<a class="headerlink" href="#labelagent" title="Permanent link">&para;</a></h1>
<p>LabelAgent are used to manipulate instance labels based on rules. You can define multiple rules, here is an example of
what you could add to the yaml file of a collector:</p>
<div class="highlight"><pre><span></span><code><span class="nt">plugins</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">LabelAgent</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="c1"># our rules:</span><span class="w"></span>
<span class="w">    </span><span class="nt">split</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">node `/` ,aggr,plex,disk</span><span class="w"></span>
<span class="w">    </span><span class="nt">replace_regex</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">node node `^(node)_(\d+)_.*$` `Node-$2`</span><span class="w"></span>
</code></pre></div>
<p><strong>Note:</strong> Labels for creating new label should use name defined in right side of =&gt;. If not present then left side of =&gt;
is used.</p>
<h2 id="split">split<a class="headerlink" href="#split" title="Permanent link">&para;</a></h2>
<p>Rule syntax:</p>
<div class="highlight"><pre><span></span><code><span class="nt">split</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LABEL `SEP` LABEL1,LABEL2,LABEL3</span><span class="w"></span>
<span class="c1"># source label - separator - comma-seperated target labels</span><span class="w"></span>
</code></pre></div>
<p>Splits the value of a given label by separator <code>SEP</code> and creates new labels if their number matches to the number of
target labels defined in rule. To discard a subvalue, just add a redundant <code>,</code> in the names of the target labels.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">split</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">node `/` ,aggr,plex,disk</span><span class="w"></span>
<span class="c1"># will split the value of &quot;node&quot; using separator &quot;/&quot;</span><span class="w"></span>
<span class="c1"># will expect 4 values: first will be discarded, remaining</span><span class="w"></span>
<span class="c1"># three will be stored as labels &quot;aggr&quot;, &quot;plex&quot; and &quot;disk&quot;</span><span class="w"></span>
</code></pre></div>
<h2 id="split_regex">split_regex<a class="headerlink" href="#split_regex" title="Permanent link">&para;</a></h2>
<p>Does the same as <code>split</code> but uses a regular expression instead of a separator.</p>
<p>Rule syntax:</p>
<div class="highlight"><pre><span></span><code><span class="nt">split_regex</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LABEL `REGEX` LABEL1,LABEL2,LABEL3</span><span class="w"></span>
</code></pre></div>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">split_regex</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">node `.*_(ag\d+)_(p\d+)_(d\d+)` aggr,plex,disk</span><span class="w"></span>
<span class="c1"># will look for &quot;_ag&quot;, &quot;_p&quot;, &quot;_d&quot;, each followed by one</span><span class="w"></span>
<span class="c1"># or more numbers, if there is a match, the submatches</span><span class="w"></span>
<span class="c1"># will be stored as &quot;aggr&quot;, &quot;plex&quot; and &quot;disk&quot;</span><span class="w"></span>
</code></pre></div>
<h2 id="split_pairs">split_pairs<a class="headerlink" href="#split_pairs" title="Permanent link">&para;</a></h2>
<p>Rule syntax:</p>
<div class="highlight"><pre><span></span><code><span class="nt">split_pairs</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LABEL `SEP1` `SEP2`</span><span class="w"></span>
<span class="c1"># source label - pair separator - key-value separator</span><span class="w"></span>
</code></pre></div>
<p>Extracts key-value pairs from the value of source label <code>LABEL</code>. Note that you need to add these keys in the export
options, otherwise they will not be exported.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">split_pairs</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comment ` ` `:`</span><span class="w"></span>
<span class="c1"># will split pairs using a single space and split key-values using colon</span><span class="w"></span>
<span class="c1"># e.g. if comment=&quot;owner:jack contact:some@email&quot;, the result wll be</span><span class="w"></span>
<span class="c1"># two new labels: owner=&quot;jack&quot; and contact=&quot;some@email&quot;</span><span class="w"></span>
</code></pre></div>
<h2 id="join">join<a class="headerlink" href="#join" title="Permanent link">&para;</a></h2>
<p>Join multiple label values using separator <code>SEP</code> and create a new label.</p>
<p>Rule syntax:</p>
<div class="highlight"><pre><span></span><code><span class="nt">join</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LABEL `SEP` LABEL1,LABEL2,LABEL3</span><span class="w"></span>
<span class="c1"># target label - separator - comma-seperated source labels</span><span class="w"></span>
</code></pre></div>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">join</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">plex_long `_` aggr,plex</span><span class="w"></span>
<span class="c1"># will look for the values of labels &quot;aggr&quot; and &quot;plex&quot;,</span><span class="w"></span>
<span class="c1"># if they are set, a new &quot;plex_long&quot; label will be added</span><span class="w"></span>
<span class="c1"># by joining their values with &quot;_&quot;</span><span class="w"></span>
</code></pre></div>
<h2 id="replace">replace<a class="headerlink" href="#replace" title="Permanent link">&para;</a></h2>
<p>Substitute substring <code>OLD</code> with <code>NEW</code> in label <code>SOURCE</code> and store in <code>TARGET</code>. Note that target and source labels can be
the same.</p>
<p>Rule syntax:</p>
<div class="highlight"><pre><span></span><code><span class="nt">replace</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SOURCE TARGET `OLD` `NEW`</span><span class="w"></span>
<span class="c1"># source label - target label - substring to replace - replace with</span><span class="w"></span>
</code></pre></div>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">replace</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">node node_short `node_` ``</span><span class="w"></span>
<span class="c1"># this rule will just remove &quot;node_&quot; from all values of label</span><span class="w"></span>
<span class="c1"># &quot;node&quot;. E.g. if label is &quot;node_jamaica1&quot;, it will rewrite it </span><span class="w"></span>
<span class="c1"># as &quot;jamaica1&quot;</span><span class="w"></span>
</code></pre></div>
<h2 id="replace_regex">replace_regex<a class="headerlink" href="#replace_regex" title="Permanent link">&para;</a></h2>
<p>Same as <code>replace</code>, but will use a regular expression instead of <code>OLD</code>. Note you can use <code>$n</code> to specify <code>n</code>th submatch
in <code>NEW</code>.</p>
<p>Rule syntax:</p>
<div class="highlight"><pre><span></span><code><span class="nt">replace_regex</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SOURCE TARGET `REGEX` `NEW`</span><span class="w"></span>
<span class="c1"># source label - target label - substring to replace - replace with</span><span class="w"></span>
</code></pre></div>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">replace_regex</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">node node `^(node)_(\d+)_.*$` `Node-$2`</span><span class="w"></span>
<span class="c1"># if there is a match, will capitalize &quot;Node&quot; and remove suffixes.</span><span class="w"></span>
<span class="c1"># E.g. if label is &quot;node_10_dc2&quot;, it will rewrite it as</span><span class="w"></span>
<span class="c1"># will rewrite it as &quot;Node-10&quot;</span><span class="w"></span>
</code></pre></div>
<h2 id="exclude_equals">exclude_equals<a class="headerlink" href="#exclude_equals" title="Permanent link">&para;</a></h2>
<p>Exclude each instance, if the value of <code>LABEL</code> is exactly <code>VALUE</code>. Exclude means that metrics for this instance will not
be exported.</p>
<p>Rule syntax:</p>
<div class="highlight"><pre><span></span><code><span class="nt">exclude_equals</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LABEL `VALUE`</span><span class="w"></span>
<span class="c1"># label name - label value</span><span class="w"></span>
</code></pre></div>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">exclude_equals</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vol_type `flexgroup_constituent`</span><span class="w"></span>
<span class="c1"># all instances, which have label &quot;vol_type&quot; with value</span><span class="w"></span>
<span class="c1"># &quot;flexgroup_constituent&quot; will not be exported</span><span class="w"></span>
</code></pre></div>
<h2 id="exclude_contains">exclude_contains<a class="headerlink" href="#exclude_contains" title="Permanent link">&para;</a></h2>
<p>Same as <code>exclude_equals</code>, but all labels that <em>contain</em> <code>VALUE</code> will be excluded</p>
<p>Rule syntax:</p>
<div class="highlight"><pre><span></span><code><span class="nt">exclude_contains</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LABEL `VALUE`</span><span class="w"></span>
<span class="c1"># label name - label value</span><span class="w"></span>
</code></pre></div>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">exclude_contains</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vol_type `flexgroup_`</span><span class="w"></span>
<span class="c1"># all instances, which have label &quot;vol_type&quot; which contain</span><span class="w"></span>
<span class="c1"># &quot;flexgroup_&quot; will not be exported</span><span class="w"></span>
</code></pre></div>
<h2 id="exclude_regex">exclude_regex<a class="headerlink" href="#exclude_regex" title="Permanent link">&para;</a></h2>
<p>Same as <code>exclude_equals</code>, but will use a regular expression and all matching instances will be excluded.</p>
<p>Rule syntax:</p>
<div class="highlight"><pre><span></span><code><span class="nt">exclude_regex</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LABEL `REGEX`</span><span class="w"></span>
<span class="c1"># label name - regular expression</span><span class="w"></span>
</code></pre></div>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">exclude_regex</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vol_type `^flex`</span><span class="w"></span>
<span class="c1"># all instances, which have label &quot;vol_type&quot; which starts with</span><span class="w"></span>
<span class="c1"># &quot;flex&quot; will not be exported</span><span class="w"></span>
</code></pre></div>
<h2 id="include_equals">include_equals<a class="headerlink" href="#include_equals" title="Permanent link">&para;</a></h2>
<p>Include each instance, if the value of <code>LABEL</code> is exactly <code>VALUE</code>. Include means that metrics for this instance will be
exported and instances that do not match will not be exported.</p>
<p>Rule syntax:</p>
<div class="highlight"><pre><span></span><code><span class="nt">include_equals</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LABEL `VALUE`</span><span class="w"></span>
<span class="c1"># label name - label value</span><span class="w"></span>
</code></pre></div>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">include_equals</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vol_type `flexgroup_constituent`</span><span class="w"></span>
<span class="c1"># all instances, which have label &quot;vol_type&quot; with value</span><span class="w"></span>
<span class="c1"># &quot;flexgroup_constituent&quot; will be exported</span><span class="w"></span>
</code></pre></div>
<h2 id="include_contains">include_contains<a class="headerlink" href="#include_contains" title="Permanent link">&para;</a></h2>
<p>Same as <code>include_equals</code>, but all labels that <em>contain</em> <code>VALUE</code> will be included</p>
<p>Rule syntax:</p>
<div class="highlight"><pre><span></span><code><span class="nt">include_contains</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LABEL `VALUE`</span><span class="w"></span>
<span class="c1"># label name - label value</span><span class="w"></span>
</code></pre></div>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">include_contains</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vol_type `flexgroup_`</span><span class="w"></span>
<span class="c1"># all instances, which have label &quot;vol_type&quot; which contain</span><span class="w"></span>
<span class="c1"># &quot;flexgroup_&quot; will be exported</span><span class="w"></span>
</code></pre></div>
<h2 id="include_regex">include_regex<a class="headerlink" href="#include_regex" title="Permanent link">&para;</a></h2>
<p>Same as <code>include_equals</code>, but a regular expression will be used for inclusion. Similar to the other includes, all
matching instances will be included and all non-matching will not be exported.</p>
<p>Rule syntax:</p>
<div class="highlight"><pre><span></span><code><span class="nt">include_regex</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LABEL `REGEX`</span><span class="w"></span>
<span class="c1"># label name - regular expression</span><span class="w"></span>
</code></pre></div>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">include_regex</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vol_type `^flex`</span><span class="w"></span>
<span class="c1"># all instances, which have label &quot;vol_type&quot; which starts with</span><span class="w"></span>
<span class="c1"># &quot;flex&quot; will be exported</span><span class="w"></span>
</code></pre></div>
<h2 id="value_mapping">value_mapping<a class="headerlink" href="#value_mapping" title="Permanent link">&para;</a></h2>
<p>value_mapping was deprecated in 21.11 and removed in 22.02. Use <a href="#valuetonum">value_to_num mapping</a> instead.</p>
<h2 id="value_to_num">value_to_num<a class="headerlink" href="#value_to_num" title="Permanent link">&para;</a></h2>
<p>Map values of a given label to a numeric metric (of type <code>uint8</code>).
This rule maps values of a given label to a numeric metric (of type <code>unit8</code>). Healthy is mapped to 1 and all non-healthy
values are mapped to 0.</p>
<p>This is handy to manipulate the data in the DB or Grafana (e.g. change color based on status or create alert).</p>
<p>Note that you don't define the numeric values yourself, instead, you only provide the possible (expected) values, the
plugin will map each value to its index in the rule.</p>
<p>Rule syntax:</p>
<div class="highlight"><pre><span></span><code><span class="nt">value_to_num</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">METRIC LABEL ZAPI_VALUE REST_VALUE `N`</span><span class="w"></span>
<span class="c1"># map values of LABEL to 1 if it is ZAPI_VALUE or REST_VALUE</span><span class="w"></span>
<span class="c1"># otherwise, value of METRIC is set to N</span><span class="w"></span>
</code></pre></div>
<p>The default value <code>N</code> is optional, if no default value is given and the label value does not match any of the given
values, the metric value will not be set.</p>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code><span class="nt">value_to_num</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">status state up online `0`</span><span class="w"></span>
<span class="c1"># a new metric will be created with the name &quot;status&quot;</span><span class="w"></span>
<span class="c1"># if an instance has label &quot;state&quot; with value &quot;up&quot;, the metric value will be 1,</span><span class="w"></span>
<span class="c1"># if it&#39;s &quot;online&quot;, the value will be set to 1,</span><span class="w"></span>
<span class="c1"># if it&#39;s any other value, it will be set to the specified default, 0</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nt">value_to_num</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">status state up online `4`</span><span class="w"></span>
<span class="c1"># metric value will be set to 1 if &quot;state&quot; is &quot;up&quot;, otherwise to **4**</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nt">value_to_num</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">status outage - - `0`</span><span class="w"> </span><span class="c1">#ok_value is empty value. </span><span class="w"></span>
<span class="c1"># metric value will be set to 1 if &quot;outage&quot; is empty, if it&#39;s any other value, it will be set to the default, 0</span><span class="w"></span>
<span class="c1"># &#39;-&#39; is a special symbol in this mapping, and it will be converted to blank while processing.</span><span class="w"></span>
</code></pre></div>
<h2 id="value_to_num_regex">value_to_num_regex<a class="headerlink" href="#value_to_num_regex" title="Permanent link">&para;</a></h2>
<p>Same as value_to_num, but will use a regular expression. All matches are mapped to 1 and non-matches are mapped to 0.</p>
<p>This is handy to manipulate the data in the DB or Grafana (e.g. change color based on status or create alert).</p>
<p>Note that you don't define the numeric values, instead, you provide the expected values and the plugin will map each
value to its index in the rule.</p>
<p>Rule syntax:</p>
<div class="highlight"><pre><span></span><code><span class="nt">value_to_num_regex</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">METRIC LABEL ZAPI_REGEX REST_REGEX `N`</span><span class="w"></span>
<span class="c1"># map values of LABEL to 1 if it matches ZAPI_REGEX or REST_REGEX</span><span class="w"></span>
<span class="c1"># otherwise, value of METRIC is set to N</span><span class="w"></span>
</code></pre></div>
<p>The default value <code>N</code> is optional, if no default value is given and the label value does not match any of the given
values, the metric value will not be set.</p>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code><span class="nt">value_to_num_regex</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">certificateuser methods .*cert.*$ .*certificate.*$ `0`</span><span class="w"></span>
<span class="c1"># a new metric will be created with the name &quot;certificateuser&quot;</span><span class="w"></span>
<span class="c1"># if an instance has label &quot;methods&quot; with value contains &quot;cert&quot;, the metric value will be 1,</span><span class="w"></span>
<span class="c1"># if value contains &quot;certificate&quot;, the value will be set to 1,</span><span class="w"></span>
<span class="c1"># if value doesn&#39;t contain &quot;cert&quot; and &quot;certificate&quot;, it will be set to the specified default, 0</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nt">value_to_num_regex</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">status state ^up$ ^ok$ `4`</span><span class="w"></span>
<span class="c1"># metric value will be set to 1 if label &quot;state&quot; matches regex, otherwise set to **4**</span><span class="w"></span>
</code></pre></div>
<h1 id="metricagent">MetricAgent<a class="headerlink" href="#metricagent" title="Permanent link">&para;</a></h1>
<p>MetricAgent are used to manipulate metrics based on rules. You can define multiple rules, here is an example of what you
could add to the yaml file of a collector:</p>
<div class="highlight"><pre><span></span><code><span class="nt">plugins</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">MetricAgent</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">compute_metric</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">snapshot_maxfiles_possible ADD snapshot.max_files_available snapshot.max_files_used</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">raid_disk_count ADD block_storage.primary.disk_count block_storage.hybrid_cache.disk_count</span><span class="w"></span>
</code></pre></div>
<p><strong>Note:</strong> Metric names used to create new metrics can come from the left or right side of the rename operator (<code>=&gt;</code>)
<strong>Note:</strong> The metric agent currently does not work for histogram or array metrics.</p>
<h2 id="compute_metric">compute_metric<a class="headerlink" href="#compute_metric" title="Permanent link">&para;</a></h2>
<p>This rule creates a new metric (of type float64) using the provided scalar or an existing metric value combined with a
mathematical operation.</p>
<p>You can provide a numeric value or a metric name with an operation. The plugin will use the provided number or fetch the
value of a given metric, perform the requested mathematical operation, and store the result in new custom metric.</p>
<p>Currently, we support these operations: ADD SUBTRACT MULTIPLY DIVIDE PERCENT</p>
<p>Rule syntax:</p>
<div class="highlight"><pre><span></span><code><span class="nt">compute_metric</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">METRIC OPERATION METRIC1 METRIC2 METRIC3</span><span class="w"></span>
<span class="c1"># target new metric - mathematical operation - input metric names </span><span class="w"></span>
<span class="c1"># apply OPERATION on metric values of METRIC1, METRIC2 and METRIC3 and set result in METRIC</span><span class="w"></span>
<span class="c1"># METRIC1, METRIC2, METRIC3 can be a scalar or an existing metric name.</span><span class="w"></span>
</code></pre></div>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code><span class="nt">compute_metric</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">space_total ADD space_available space_used</span><span class="w"></span>
<span class="c1"># a new metric will be created with the name &quot;space_total&quot;</span><span class="w"></span>
<span class="c1"># if an instance has metric &quot;space_available&quot; with value &quot;1000&quot;, and &quot;space_used&quot; with value &quot;400&quot;,</span><span class="w"></span>
<span class="c1"># the result value will be &quot;1400&quot; and set to metric &quot;space_total&quot;.</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nt">compute_metric</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">disk_count ADD primary.disk_count secondary.disk_count hybrid.disk_count</span><span class="w"></span>
<span class="c1"># value of metric &quot;disk_count&quot; would be addition of all the given disk_counts metric values.</span><span class="w"></span>
<span class="c1"># disk_count = primary.disk_count + secondary.disk_count + hybrid.disk_count</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nt">compute_metric</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">files_available SUBTRACT files files_used</span><span class="w"></span>
<span class="c1"># value of metric &quot;files_available&quot; would be subtraction of the metric value of files_used from metric value of files.</span><span class="w"></span>
<span class="c1"># files_available = files - files_used</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nt">compute_metric</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">total_bytes MULTIPLY bytes_per_sector sector_count</span><span class="w"></span>
<span class="c1"># value of metric &quot;total_bytes&quot; would be multiplication of metric value of bytes_per_sector and metric value of sector_count.</span><span class="w"></span>
<span class="c1"># total_bytes = bytes_per_sector * sector_count</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nt">compute_metric</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uptime MULTIPLY stats.power_on_hours 60 60</span><span class="w"></span>
<span class="c1"># value of metric &quot;uptime&quot; would be multiplication of metric value of stats.power_on_hours and scalar value of 60 * 60.</span><span class="w"></span>
<span class="c1"># total_bytes = bytes_per_sector * sector_count</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nt">compute_metric</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">transmission_rate DIVIDE transfer.bytes_transferred transfer.total_duration</span><span class="w"></span>
<span class="c1"># value of metric &quot;transmission_rate&quot; would be division of metric value of transfer.bytes_transferred by metric value of transfer.total_duration.</span><span class="w"></span>
<span class="c1"># transmission_rate = transfer.bytes_transferred / transfer.total_duration</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nt">compute_metric</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">inode_used_percent PERCENT inode_files_used inode_files_total</span><span class="w"></span>
<span class="c1"># a new metric named &quot;inode_used_percent&quot; will be created by dividing the metric &quot;inode_files_used&quot; by </span><span class="w"></span>
<span class="c1">#  &quot;inode_files_total&quot; and multiplying the result by 100.</span><span class="w"></span>
<span class="c1"># inode_used_percent = inode_files_used / inode_files_total * 100</span><span class="w"></span>
</code></pre></div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../troubleshooting/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Troubleshoot" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Troubleshoot
            </div>
          </div>
        </a>
      
      
        
        <a href="../resources/matrix/" class="md-footer__link md-footer__link--next" aria-label="Next: Matrix" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Matrix
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; NetApp
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://discord.com/channels/855068651522490400/1062050414146625536" target="_blank" rel="noopener" title="discord.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485.065 485.065 0 0 0 404.081 32.03a1.816 1.816 0 0 0-1.923.91 337.461 337.461 0 0 0-14.9 30.6 447.848 447.848 0 0 0-134.426 0 309.541 309.541 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.689 483.689 0 0 0-119.688 37.107 1.712 1.712 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.016 2.016 0 0 0 .765 1.375 487.666 487.666 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348.2 348.2 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321.173 321.173 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251.047 251.047 0 0 0 9.109-7.137 1.819 1.819 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.812 1.812 0 0 1 1.924.233 234.533 234.533 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.407 301.407 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391.055 391.055 0 0 0 30.014 48.815 1.864 1.864 0 0 0 2.063.7A486.048 486.048 0 0 0 610.7 405.729a1.882 1.882 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541ZM222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241Zm195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241Z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://github.com/NetApp/harvest/discussions" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.d6c3db9e.min.js"></script>
      
    
  </body>
</html>